# coding=utf-8

import sys
import os
from os.path import isfile

_home_dir = os.environ['GUNIFLASK_APP_HOME']
if _home_dir not in sys.path:
    sys.path.append(_home_dir)

from {{project_name}}.utils import load_config


def cat_pid(argv=None):
    if argv is None:
        argv = sys.argv
    if len(argv) < 2:
        sys.exit(1)
    del argv[0]
    pidfile = load_config(argv[0])['pidfile']
    if not isfile(pidfile):
        sys.exit(1)
    with open(pidfile, 'r') as f:
        line = f.readline()
        if line:
            print(line.strip())


if __name__ == '__main__':
    cat_pid()
