#!/usr/bin/env bash

bin=$(dirname ${BASH_SOURCE[0]})
bin=$(cd "$bin"; pwd)

export GUNIFLASK_APP_HOME=${GUNIFLASK_APP_HOME:-$(cd "$bin"/../; pwd)}
export GUNIFLASK_APP_CONF_DIR=${GUNIFLASK_APP_CONF_DIR:-"$GUNIFLASK_APP_HOME"/conf}

if [ -f "$GUNIFLASK_APP_CONF_DIR"/{{project__name}}-env.sh ]; then
    . "$GUNIFLASK_APP_CONF_DIR"/{{project__name}}-env.sh
fi

if [ -n "$VIRTUAL_ENV" ]; then
    . "$VIRTUAL_ENV"/bin/activate
fi

export GUNIFLASK_APP_LOG_DIR=${GUNIFLASK_APP_LOG_DIR:-"$GUNIFLASK_APP_HOME"/.log}
export GUNIFLASK_APP_PID_DIR=${GUNIFLASK_APP_PID_DIR:-"$GUNIFLASK_APP_HOME"/.pid}
export GUNIFLASK_APP_ID_STRING=${GUNIFLASK_APP_ID_STRING:-$USER}
